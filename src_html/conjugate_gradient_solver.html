<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="main_style.css">
  <title>WebAssembly Numerical Computing: Conjugate Gradient Solver</title>

</head>

<body>

  <main>

    <div class="description">
      <h1>WebAssembly Numerical Computing: Conjugate Gradient Solver</h1>
      <p>
          This page measures the performance of the conjugate gradient solver.
          The number of iterations until convergence varies, and depends on the condition number.
      </p>

      <p>
        The numbers in the tables show the time taken to perform the operation in milliseconds.
        The time is sampled by <code>chrono::high_resolution_clock::now()</code> in C++.
        Please note that the resolution of this function in most of the browsers is around <i>0.01</i>[ms].
      </p>
    
    </div>

    <div>

      <h2>Results for Float, Condition Number 10.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_float_10" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.14</td><td>0.67</td><td>1.91</td><td>6.18</td></tr>
        
      </table>

    </div>

    <div>

      <h2>Results for Float, Condition Number 1000.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_float_1000" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.0469</td><td>0.346</td><td>2.87</td><td>20.2</td></tr>
        
      </table>

    </div>

    <div>

      <h2>Results for Float, Condition Number 100000.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_float_100000" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.066</td><td>0.542</td><td>2.74</td><td>23</td></tr>
        
      </table>

    </div>

    <div>

      <h2>Results for Double, Condition Number 10.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_double_10" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.0399</td><td>0.284</td><td>1.18</td><td>6.32</td></tr>
        
      </table>

    </div>

    <div>

      <h2>Results for Double, Condition Number 1000.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_double_1000" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.0644</td><td>0.501</td><td>5.08</td><td>23.1</td></tr>
        
      </table>

    </div>

    <div>

      <h2>Results for Double, Condition Number 100000.0</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_double_100000" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size</th><th>64x64</th><th>128x128</th><th>256x256</th><th>512x512</th></tr>
        <tr><td>plain c++</td><td>0.0657</td><td>0.61</td><td>3.08</td><td>20.4</td></tr>
        
      </table>

    </div>

  </main>

  <script>
    let Module = {
      onRuntimeInitialized: () => {

        let resultFloat10 = Module.testConjugateGradientFloatCond10();
        console.log( resultFloat10 );
        
        let tableFloat10 = document.querySelector('#results_browser_float_10');
        tableFloat10.innerHTML = resultFloat10;

        let resultFloat1000 = Module.testConjugateGradientFloatCond1000();
        console.log( resultFloat1000 );
        
        let tableFloat1000 = document.querySelector('#results_browser_float_1000');
        tableFloat1000.innerHTML = resultFloat1000;

        let resultFloat100000 = Module.testConjugateGradientFloatCond100000();
        console.log( resultFloat100000 );
        
        let tableFloat100000 = document.querySelector('#results_browser_float_100000');
        tableFloat100000.innerHTML = resultFloat100000;

        let resultDouble10 = Module.testConjugateGradientDoubleCond10();
        console.log( resultDouble10 );
        
        let tableDouble10 = document.querySelector('#results_browser_double_10');
        tableDouble10.innerHTML = resultDouble10;

        let resultDouble1000 = Module.testConjugateGradientDoubleCond1000();
        console.log( resultDouble1000 );
        
        let tableDouble1000 = document.querySelector('#results_browser_double_1000');
        tableDouble1000.innerHTML = resultDouble1000;

        let resultDouble100000 = Module.testConjugateGradientDoubleCond100000();
        console.log( resultDouble100000 );
        
        let tableDouble100000 = document.querySelector('#results_browser_double_100000');
        tableDouble100000.innerHTML = resultDouble100000;
      }
    };
  </script>
  <script src="conjugate_gradient_solver.js"></script>
</body>

</html>
