<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="main_style.css">
  <title>WebAssembly Numerical Computing: Sparse Matrix-Vector Multiplication</title>

</head>

<body>

  <main>

    <div class="description">

      <h1>WebAssembly Numerical Computing: Sparse Matrix-Vector Multiplication</h1>

      <p>
          This page measures the performance of the sparse matrix-vector multiplication.
      </p>

      <p>
          The numbers below are in milliseconds.
          The time is sampled by <code>chrono::high_resolution_clock::now()</code>.
          Please note that the resolution of the function in most of the browsers is around <i>100 [μs]</i>,
          and therefore the value <i>0</i> below should be interpreted as somewhere between <i>0</i> and <i>100 [μs]</i>.
      </p>

    </div>

    <div>
      <h2>Results for Float</h2>

      <h3>Results from This Browser</h3>    
      <table id="results_browser_float" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size & occupancy</th><th>256x256, 0.1</th><th>512x512, 0.1</th><th>1Kx1K, 0.1</th><th>2Kx2K, 0.1</th><th>4Kx4K, 0.1</th></tr>
        <tr><td>plain c++</td><td>0.0114876</td><td>0.0567916</td><td>0.165371</td><td>0.439596</td><td>1.93378</td></tr>

      </table>
    </div>

    <div>
      <h2>Results for Double</h2>

      <h3>Results from This Browser</h3>
      <table id="results_browser_double" border="1">
      <th>Calculating...</th>
      </table>

      <h3 class="results_native">[Reference] Results from Mac Mini M1 2020 Native in C++</h3>
      <table class="results_native" border="1">

        <tr><th>matrix size & occupancy</th><th>256x256, 0.1</th><th>512x512, 0.1</th><th>1Kx1K, 0.1</th><th>2Kx2K, 0.1</th><th>4Kx4K, 0.1</th></tr>
        <tr><td>plain c++</td><td>0.0054957</td><td>0.0184418</td><td>0.0884796</td><td>0.440858</td><td>1.9322</td></tr>

      </table>
    </div>

  </main>

  <script>
    let Module = {
      onRuntimeInitialized: () => {

        let resultFloat = Module.testSparseMatrixVectorFloat();
        console.log( resultFloat );
        
        let tableFloat = document.querySelector('#results_browser_float');
        tableFloat.innerHTML = resultFloat;

        let resultDouble = Module.testSparseMatrixVectorDouble();
        console.log( resultDouble );
        
        let tableDouble = document.querySelector('#results_browser_double');
        tableDouble.innerHTML = resultDouble;
      }
    };
  </script>
  <script src="sparse_matrix_vector.js"></script>
</body>

</html>
